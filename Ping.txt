# This script pings a list of servers from a file.
# The path to the file is passed as the -Target parameter.

param (
    [string]$Target
)

# Read the server names from the file path provided by the -Target parameter
try {
    $Servers = Get-Content -Path $Target -ErrorAction Stop
}
catch {
    Write-Output "Error reading file: $Target"
    Write-Output $_.Exception.Message
    exit 1
}


# Loop through each server and ping it
foreach ($Server in $Servers) {
    if (-not [string]::IsNullOrWhiteSpace($Server)) {
        Write-Output "Pinging $Server..."
        # Test the connection to the server
        # -Count 1 sends a single ping packet
        if (Test-Connection -ComputerName $Server -Count 1 -Quiet -ErrorAction SilentlyContinue) {
            Write-Output "$Server is UP"
        } else {
            Write-Output "$Server is DOWN"
        }
    }
}